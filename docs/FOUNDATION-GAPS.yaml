# Foundation Gaps - Last Apple Next.js Migration
# Generated: 2026-01-12
# Purpose: Track foundational infrastructure that needs to be addressed before content migration

# =============================================================================
# CRITICAL (P0) - Must fix immediately
# =============================================================================
critical:
  email_not_working:
    status: FIXED
    priority: P0
    fixed_date: "2026-01-12"
    description: "Contact form email - NOW WORKING with AWS SES"
    solution_implemented:
      provider: "AWS SES (Simple Email Service)"
      region: "us-west-2"
      from_address: "noreply@lastapple.com"
      send_to: "hank@lastapple.com"
    current_state:
      api_route: "src/app/api/contact/route.ts - WORKING with AWS SES"
      form_component: "src/components/ContactForm.tsx - EXISTS"
      env_example: ".env.example - Documents AWS credentials"
      env_local: "EXISTS with AWS credentials"
      test_result: "SUCCESS - MessageId received 2026-01-12"
    configuration:
      files_updated:
        - ".env.local - AWS credentials configured"
        - ".env.example - Updated to document AWS vars"
        - "src/app/api/contact/route.ts - Rewritten for SES"
      packages:
        added: "@aws-sdk/client-ses"
        removed: "resend (no longer needed)"
    verification:
      - "[x] .env.local exists with AWS credentials"
      - "[x] Contact form submission works"
      - "[x] Email received at hank@lastapple.com"

  favicon_missing:
    status: FIXED
    priority: P0
    fixed_date: "2026-01-13"
    description: "Favicon suite - NOW WORKING"
    implementation:
      source: "/public/logo-small.png"
      script: "scripts/generate-favicons.mjs"
      files_generated:
        - "favicon.ico (32x32)"
        - "favicon-16x16.png"
        - "favicon-32x32.png"
        - "apple-touch-icon.png (180x180)"
        - "android-chrome-192x192.png"
        - "android-chrome-512x512.png"
        - "site.webmanifest"
      metadata_updated: "src/app/layout.tsx - icons and manifest added"

  not_found_page_missing:
    status: FIXED
    priority: P0
    fixed_date: "2026-01-13"
    description: "Custom 404 page - NOW WORKING"
    implementation:
      file: "src/app/not-found.tsx"
      features:
        - "Large gradient 404 text"
        - "Go Home and Contact Us buttons"
        - "Helpful links section (Services, Solutions, Blog, About)"
        - "Matches site design system"

# =============================================================================
# HIGH (P1) - Should fix before go-live
# =============================================================================
high:
  footer_broken_links:
    status: FIXED
    priority: P1
    fixed_date: "2026-01-13"
    description: "Footer links - NOW WORKING"
    implementation:
      changes:
        - "/services/wordpress-care → /services/wordpress-maintenance"
        - "/services/ai-marketing → /services/ai-chatbot"
        - "/services/system-integration → /solutions/data-integration"
        - "/portfolio → /solutions"
      file: "src/components/Footer.tsx"

  footer_logo_broken:
    status: OK
    priority: P1
    note: "Logo file /logo.jpg exists and works - was false alarm in initial audit"

  social_links_missing_from_footer:
    status: FIXED
    priority: P1
    fixed_date: "2026-01-13"
    description: "Footer social links - NOW WORKING"
    implementation:
      icons_added:
        - "Facebook (lucide-react)"
        - "Instagram (lucide-react)"
        - "LinkedIn (lucide-react)"
        - "YouTube (lucide-react)"
        - "X/Twitter (custom SVG)"
      file: "src/components/Footer.tsx"
      styling: "Muted bg with primary hover effect"

  json_ld_social_links_outdated:
    status: FIXED
    priority: P1
    fixed_date: "2026-01-13"
    description: "JSON-LD schema - NOW CORRECT"
    implementation:
      updated_sameAs:
        - "https://www.facebook.com/LastAppleConsulting"
        - "https://x.com/lastappledma"
        - "https://www.instagram.com/hank_groman/"
        - "https://www.youtube.com/@lastappleai"
        - "https://linkedin.com/company/lastapple"
      file: "src/app/layout.tsx"

# =============================================================================
# MEDIUM (P2) - Should fix during migration
# =============================================================================
medium:
  newsletter_signup_not_implemented:
    status: NOT_IMPLEMENTED
    priority: P2
    description: "Blog signup form exists in WordPress, not in Next.js"
    wordpress_form:
      id: 9127
      name: "last-apple-signup-blog-archive"
    options:
      - "Integrate with email service (Resend, Mailchimp, ConvertKit)"
      - "Add to /stream page or sidebar"
      - "Consider using same Resend setup as contact form"

  multiple_form_types_not_implemented:
    status: NOT_IMPLEMENTED
    priority: P2
    description: "WordPress has 4 forms, Next.js has 1"
    wordpress_forms:
      - "1407: Main contact form (IMPLEMENTED)"
      - "9127: Newsletter signup (NOT IMPLEMENTED)"
      - "9706: SEO audit request (NOT IMPLEMENTED - should be /contact?type=seo-review)"
      - "10496: WordPress quote (NOT IMPLEMENTED - should be /contact?type=maintenance)"
    fix_approach:
      - "Enhance ContactForm to accept 'type' prop"
      - "Show different fields based on type"
      - "URL: /contact?type=maintenance shows maintenance-specific fields"

  og_image_missing:
    status: MISSING
    priority: P2
    description: "No default Open Graph image"
    issues:
      - "No og-image.png in public/"
      - "Social shares won't have image"
    fix:
      - "Create 1200x630 image with branding"
      - "Add to public/og-image.png"
      - "Reference in layout.tsx metadata"

# =============================================================================
# LOW (P3) - Nice to have
# =============================================================================
low:
  error_boundary_missing:
    status: MISSING
    priority: P3
    description: "No error boundary for graceful error handling"
    fix: "Create src/app/error.tsx"

  loading_states_missing:
    status: MISSING
    priority: P3
    description: "No loading.tsx files for Suspense"
    fix: "Create src/app/loading.tsx and per-route loading states"

  pwa_manifest_missing:
    status: FIXED
    priority: P3
    fixed_date: "2026-01-13"
    description: "PWA manifest - NOW WORKING"
    implementation:
      file: "public/site.webmanifest"
      features:
        - "App name and short_name"
        - "Theme color matching site (#a63d3d)"
        - "Background color matching site (#141010)"
        - "192x192 and 512x512 icons"

  robots_txt_basic:
    status: EXISTS_BUT_BASIC
    priority: P3
    description: "robots.ts exists but may need refinement"
    file: "src/app/robots.ts"

# =============================================================================
# ENVIRONMENT VARIABLES STATUS
# =============================================================================
environment_variables:
  documented_in_example:
    - name: "AWS_ACCESS_KEY_ID"
      status: "CONFIGURED in .env.local"
      required: true
    - name: "AWS_SECRET_ACCESS_KEY"
      status: "CONFIGURED in .env.local"
      required: true
    - name: "AWS_REGION"
      status: "CONFIGURED - us-west-2"
      required: true
    - name: "SES_FROM_EMAIL"
      status: "CONFIGURED - noreply@lastapple.com"
      required: true
    - name: "NEXT_PUBLIC_GA_MEASUREMENT_ID"
      status: "CONFIGURED - G-FZS6N6JB5Z"
      required: false
    - name: "NEXT_PUBLIC_CLARITY_PROJECT_ID"
      status: "CONFIGURED - 5e11a7a1-bade-49fa-b226-2f095afd0146"
      required: false

  status: "ALL CONFIGURED"
  notes:
    - ".env.local exists with all required credentials"
    - "AWS SES already in production mode"
    - "lastapple.com domain already verified in SES"

# =============================================================================
# FIX PRIORITY ORDER
# =============================================================================
fix_order:
  completed:
    - "[x] 1. Configure AWS SES for email (DONE 2026-01-13)"
    - "[x] 2. Create .env.local with AWS credentials (DONE)"
    - "[x] 3. Test contact form submission (DONE - MessageId received)"
    - "[x] 4. Create not-found.tsx page (DONE 2026-01-13)"
    - "[x] 5. Fix Footer.tsx broken links (DONE 2026-01-13)"
    - "[x] 6. Add social links to Footer (DONE 2026-01-13)"
    - "[x] 7. Update JSON-LD social links (DONE 2026-01-13)"

  immediate:
    - "[x] 8. Generate and add favicon files (DONE 2026-01-13)"
    - "[ ] 9. Create og-image.png"

  during_migration:
    - "[ ] 10. Enhance ContactForm for multiple types"
    - "[ ] 11. Add newsletter signup component"
    - "[ ] 12. Add loading states"
    - "[ ] 13. Add error boundary"

# =============================================================================
# VERIFICATION CHECKLIST
# =============================================================================
verification_checklist:
  email:
    - "[x] .env.local exists with AWS SES credentials"
    - "[x] Contact form submission works"
    - "[x] Email received at hank@lastapple.com"

  branding:
    - "[x] Favicon shows in browser tab"
    - "[x] Apple touch icon works"
    - "[x] Logo loads in footer"
    - "[x] Logo loads in navigation"

  pages:
    - "[x] 404 page shows custom design"
    - "[x] All footer links work"
    - "[x] Social links visible and work"

  seo:
    - "[x] JSON-LD social links updated"
    - "[ ] OG image shows in social shares"
    - "[x] Meta tags correct on all pages"
