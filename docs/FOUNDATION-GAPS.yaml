# Foundation Gaps - Last Apple Next.js Migration
# Generated: 2026-01-12
# Purpose: Track foundational infrastructure that needs to be addressed before content migration

# =============================================================================
# CRITICAL (P0) - Must fix immediately
# =============================================================================
critical:
  email_not_working:
    status: FIXED
    priority: P0
    fixed_date: "2026-01-12"
    description: "Contact form email - NOW WORKING with AWS SES"
    solution_implemented:
      provider: "AWS SES (Simple Email Service)"
      region: "us-west-2"
      from_address: "noreply@lastapple.com"
      send_to: "hank@lastapple.com"
    current_state:
      api_route: "src/app/api/contact/route.ts - WORKING with AWS SES"
      form_component: "src/components/ContactForm.tsx - EXISTS"
      env_example: ".env.example - Documents AWS credentials"
      env_local: "EXISTS with AWS credentials"
      test_result: "SUCCESS - MessageId received 2026-01-12"
    configuration:
      files_updated:
        - ".env.local - AWS credentials configured"
        - ".env.example - Updated to document AWS vars"
        - "src/app/api/contact/route.ts - Rewritten for SES"
      packages:
        added: "@aws-sdk/client-ses"
        removed: "resend (no longer needed)"
    verification:
      - "[x] .env.local exists with AWS credentials"
      - "[x] Contact form submission works"
      - "[x] Email received at hank@lastapple.com"

  favicon_missing:
    status: MISSING
    priority: P0
    description: "No favicon - browser tabs show generic icon"
    issues:
      - "No favicon.ico in public/"
      - "No apple-touch-icon.png"
      - "No site.webmanifest"
    current_files:
      - "/public/logo-small.png (exists - can use as source)"
      - "/public/images/wp/Original-on-Transparent.png (full logo)"
    fix_steps:
      - "Generate favicon.ico from logo (multiple sizes)"
      - "Create apple-touch-icon.png (180x180)"
      - "Create favicon-32x32.png, favicon-16x16.png"
      - "Create site.webmanifest"
      - "Add to app/layout.tsx metadata"
    tools: "https://realfavicongenerator.net or https://favicon.io"

  not_found_page_missing:
    status: MISSING
    priority: P0
    description: "No custom 404 page"
    issues:
      - "No src/app/not-found.tsx file"
      - "Shows default Next.js 404"
      - "Bad UX and missed opportunity"
    fix_steps:
      - "Create src/app/not-found.tsx"
      - "Match site design"
      - "Include helpful links"
      - "Consider search functionality"

# =============================================================================
# HIGH (P1) - Should fix before go-live
# =============================================================================
high:
  footer_broken_links:
    status: BROKEN
    priority: P1
    description: "Footer has links to non-existent pages"
    issues:
      - "Links to /services/wordpress-care (doesn't exist)"
      - "Links to /services/ai-marketing (doesn't exist)"
      - "Links to /services/system-integration (doesn't exist)"
      - "Links to /portfolio (doesn't exist)"
    correct_paths:
      wordpress_care: "/services/wordpress-maintenance"
      ai_marketing: "/solutions/ai-chatbot OR /services/content-creation"
      system_integration: "/solutions/data-integration"
      portfolio: "Remove or link to /stream"
    file: "src/components/Footer.tsx"

  footer_logo_broken:
    status: BROKEN
    priority: P1
    description: "Footer references non-existent logo file"
    issue: "References /logo.jpg but file doesn't exist"
    available_logos:
      - "/public/logo-small.png"
      - "/public/images/wp/Original-on-Transparent.png"
      - "/public/images/wp/last-apple-logo-180w.png"
    fix: "Update src/components/Footer.tsx to use correct logo path"

  social_links_missing_from_footer:
    status: MISSING
    priority: P1
    description: "Footer has no social media links"
    wordpress_social_accounts:
      facebook: "https://www.facebook.com/LastAppleConsulting"
      twitter: "https://x.com/lastappledma"
      instagram: "https://www.instagram.com/hank_groman/"
      youtube: "https://www.youtube.com/@lastappleai"
      linkedin: "https://linkedin.com/company/lastapple"
      whatsapp: "https://wa.me/17148139973"
    fix_steps:
      - "Add social icons to Footer.tsx"
      - "Use lucide-react icons or custom SVGs"
      - "Add hover states matching design system"

  json_ld_social_links_outdated:
    status: OUTDATED
    priority: P1
    description: "Schema.org sameAs links don't match WordPress"
    current_in_layout:
      - "https://www.linkedin.com/in/hankgroman/"
      - "https://www.facebook.com/LastAppleConsulting"
      - "https://www.instagram.com/hjgroman/"
      - "https://www.youtube.com/channel/UC3OPbkyTemkxPwFNvIhHu2g"
    should_be:
      - "https://www.facebook.com/LastAppleConsulting"
      - "https://x.com/lastappledma"
      - "https://www.instagram.com/hank_groman/"
      - "https://www.youtube.com/@lastappleai"
      - "https://linkedin.com/company/lastapple"
    file: "src/app/layout.tsx - jsonLd object"

# =============================================================================
# MEDIUM (P2) - Should fix during migration
# =============================================================================
medium:
  newsletter_signup_not_implemented:
    status: NOT_IMPLEMENTED
    priority: P2
    description: "Blog signup form exists in WordPress, not in Next.js"
    wordpress_form:
      id: 9127
      name: "last-apple-signup-blog-archive"
    options:
      - "Integrate with email service (Resend, Mailchimp, ConvertKit)"
      - "Add to /stream page or sidebar"
      - "Consider using same Resend setup as contact form"

  multiple_form_types_not_implemented:
    status: NOT_IMPLEMENTED
    priority: P2
    description: "WordPress has 4 forms, Next.js has 1"
    wordpress_forms:
      - "1407: Main contact form (IMPLEMENTED)"
      - "9127: Newsletter signup (NOT IMPLEMENTED)"
      - "9706: SEO audit request (NOT IMPLEMENTED - should be /contact?type=seo-review)"
      - "10496: WordPress quote (NOT IMPLEMENTED - should be /contact?type=maintenance)"
    fix_approach:
      - "Enhance ContactForm to accept 'type' prop"
      - "Show different fields based on type"
      - "URL: /contact?type=maintenance shows maintenance-specific fields"

  og_image_missing:
    status: MISSING
    priority: P2
    description: "No default Open Graph image"
    issues:
      - "No og-image.png in public/"
      - "Social shares won't have image"
    fix:
      - "Create 1200x630 image with branding"
      - "Add to public/og-image.png"
      - "Reference in layout.tsx metadata"

# =============================================================================
# LOW (P3) - Nice to have
# =============================================================================
low:
  error_boundary_missing:
    status: MISSING
    priority: P3
    description: "No error boundary for graceful error handling"
    fix: "Create src/app/error.tsx"

  loading_states_missing:
    status: MISSING
    priority: P3
    description: "No loading.tsx files for Suspense"
    fix: "Create src/app/loading.tsx and per-route loading states"

  pwa_manifest_missing:
    status: MISSING
    priority: P3
    description: "No PWA manifest for mobile installability"
    fix: "Create public/site.webmanifest"

  robots_txt_basic:
    status: EXISTS_BUT_BASIC
    priority: P3
    description: "robots.ts exists but may need refinement"
    file: "src/app/robots.ts"

# =============================================================================
# ENVIRONMENT VARIABLES STATUS
# =============================================================================
environment_variables:
  documented_in_example:
    - name: "AWS_ACCESS_KEY_ID"
      status: "CONFIGURED in .env.local"
      required: true
    - name: "AWS_SECRET_ACCESS_KEY"
      status: "CONFIGURED in .env.local"
      required: true
    - name: "AWS_REGION"
      status: "CONFIGURED - us-west-2"
      required: true
    - name: "SES_FROM_EMAIL"
      status: "CONFIGURED - noreply@lastapple.com"
      required: true
    - name: "NEXT_PUBLIC_GA_MEASUREMENT_ID"
      status: "CONFIGURED - G-FZS6N6JB5Z"
      required: false
    - name: "NEXT_PUBLIC_CLARITY_PROJECT_ID"
      status: "CONFIGURED - 5e11a7a1-bade-49fa-b226-2f095afd0146"
      required: false

  status: "ALL CONFIGURED"
  notes:
    - ".env.local exists with all required credentials"
    - "AWS SES already in production mode"
    - "lastapple.com domain already verified in SES"

# =============================================================================
# FIX PRIORITY ORDER
# =============================================================================
fix_order:
  completed:
    - "[x] 1. Configure AWS SES for email (DONE 2026-01-12)"
    - "[x] 2. Create .env.local with AWS credentials (DONE)"
    - "[x] 3. Test contact form submission (DONE - MessageId received)"

  immediate:
    - "[ ] 4. Generate and add favicon files"
    - "[ ] 5. Create not-found.tsx page"

  before_content_migration:
    - "[ ] 6. Fix Footer.tsx broken links"
    - "[ ] 7. Fix Footer.tsx logo reference"
    - "[ ] 8. Add social links to Footer"
    - "[ ] 9. Update JSON-LD social links in layout.tsx"
    - "[ ] 10. Create og-image.png"

  during_migration:
    - "[ ] 11. Enhance ContactForm for multiple types"
    - "[ ] 12. Add newsletter signup component"
    - "[ ] 13. Add loading states"
    - "[ ] 14. Add error boundary"

# =============================================================================
# VERIFICATION CHECKLIST
# =============================================================================
verification_checklist:
  email:
    - "[x] .env.local exists with AWS SES credentials"
    - "[x] Contact form submission works"
    - "[x] Email received at hank@lastapple.com"

  branding:
    - "[ ] Favicon shows in browser tab"
    - "[ ] Apple touch icon works"
    - "[ ] Logo loads in footer"
    - "[ ] Logo loads in navigation"

  pages:
    - "[ ] 404 page shows custom design"
    - "[ ] All footer links work"
    - "[ ] Social links visible and work"

  seo:
    - "[ ] JSON-LD validates (search.google.com/test/rich-results)"
    - "[ ] OG image shows in social shares"
    - "[ ] Meta tags correct on all pages"
